(function(){"use strict";var t={38865:function(t,e,n){n(752),n(73964),n(60429),n(36409);var o=n(70538),i=function(){var t=this,e=t._self._c;return e("logView")},r=[],s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"xterm-container",attrs:{id:"xterm"}})},c=[],u=(n(64043),n(61514),n(48324),n(69358),n(12320)),a=n(12617),l={data:function(){return{pingOk:!0,resize:!1,term:"",socket:"",app:"",server:"",pod:"",history:"",nodeip:""}},mounted:function(){this.app=this.getQueryVariable("ServerApp"),this.server=this.getQueryVariable("ServerName"),this.pod=this.getQueryVariable("PodName"),this.history=this.getQueryVariable("History"),this.nodeip=this.getQueryVariable("NodeIP"),document.title=this.app+"-"+this.server+"-"+this.nodeip;var t=window.location.search.substring(1);"http:"==window.location.protocol?this.init("ws://"+window.location.host+"/web/shell?"+t):"https:"==window.location.protocol?this.init("wss://"+window.location.host+"/web/shell?"+t):console.log("unknown protocol",window.location)},methods:{debounce:function(t,e){var n=null;return function(){null!==n&&clearTimeout(n),n=setTimeout(t,e)}},resizeScreen:function(){var t=new a.FitAddon;this.term.loadAddon(t),t.fit(),this.send(JSON.stringify({operation:"resize",width:Math.floor(this.term.cols),height:Math.floor(this.term.rows)}))},ping:function(){var t=this;this.pingOk?(this.pingOk=!1,this.resize=!1,this.send(JSON.stringify({operation:"ping"})),setTimeout((function(){t.ping()}),1e4)):location.reload()},getQueryVariable:function(t){for(var e=window.location.search.substring(1),n=e.split("&"),o=0;o<n.length;o++){var i=n[o].split("=");if(i[0]==t)return i[1]}return!1},initXterm:function(){this.term=new u.Terminal({rendererType:"canvas",convertEol:!0,scrollback:5e3,disableStdin:!1,cursorStyle:"block",cursorBlink:!0}),this.term.open(document.getElementById("xterm")),this.resizeScreen(),window.addEventListener("resize",this.debounce(this.resizeScreen,1e3),!1),this.term.focus();var t=this;this.term.onData((function(e){var n={operation:"stdin",data:e};t.socket.onsend(JSON.stringify(n))}))},init:function(t){var e=this;this.socket=new WebSocket(t,"echo-protocol"),this.socket.onopen=this.open,this.socket.onerror=this.error,this.socket.onmessage=this.getMessage,this.socket.onsend=this.send,setTimeout((function(){e.ping()}),1e4)},open:function(){this.initXterm(),this.term.writeln("connecting to pod [1;3;31m ".concat(this.pod," [0m ... \r\n")),this.resizeScreen()},error:function(){console.log("[error] Connection error"),setTimeout((function(){location.reload()}),1e3)},close:function(){this.socket.close(),console.log("[close] Connection closed cleanly"),term.writeln(""),window.removeEventListener("resize",this.resizeScreen)},getMessage:function(t){var e=t.data&&JSON.parse(t.data);"stdout"===e.operation?(this.resize||(this.resize=!0,this.resizeScreen()),this.term.write(e.data)):"pong"===e.operation&&(this.pingOk=!0)},send:function(t){this.socket.send(t)}}},h=l,d=n(43736),f=(0,d.Z)(h,s,c,!1,null,null,null),p=f.exports,g={components:{logView:p},data:function(){return{}}},m=g,v=(0,d.Z)(m,i,r,!1,null,null,null),w=v.exports;n(75847);o["default"].config.productionTip=!1,new o["default"]({el:"#app",components:{App:w},template:"<App/>"})}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={id:o,loaded:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=t,function(){n.amdO={}}(),function(){var t=[];n.O=function(e,o,i,r){if(!o){var s=1/0;for(l=0;l<t.length;l++){o=t[l][0],i=t[l][1],r=t[l][2];for(var c=!0,u=0;u<o.length;u++)(!1&r||s>=r)&&Object.keys(n.O).every((function(t){return n.O[t](o[u])}))?o.splice(u--,1):(c=!1,r<s&&(s=r));if(c){t.splice(l--,1);var a=i();void 0!==a&&(e=a)}}return e}r=r||0;for(var l=t.length;l>0&&t[l-1][2]>r;l--)t[l]=t[l-1];t[l]=[o,i,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){n.j=521}(),function(){n.p="/"}(),function(){var t={521:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,r,s=o[0],c=o[1],u=o[2],a=0;if(s.some((function(e){return 0!==t[e]}))){for(i in c)n.o(c,i)&&(n.m[i]=c[i]);if(u)var l=u(n)}for(e&&e(o);a<s.length;a++)r=s[a],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(l)},o=self["webpackChunkclient"]=self["webpackChunkclient"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998,64],(function(){return n(38865)}));o=n.O(o)})();