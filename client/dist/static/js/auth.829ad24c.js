(function(t){function e(e){for(var i,s,l=e[0],r=e[1],c=e[2],h=0,d=[];h<l.length;h++)s=l[h],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);u&&u(e);while(d.length)d.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,l=1;l<a.length;l++){var r=a[l];0!==o[r]&&(i=!1)}i&&(n.splice(e--,1),t=s(s.s=a[0]))}return t}var i={},o={auth:0},n=[];function s(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=r;n.push([3,"chunk-vendors","chunk-common"]),a()})({"0494":function(t,e,a){"use strict";var i=a("05a6"),o=a.n(i);o.a},"05a6":function(t,e,a){},"099c":function(t,e){t.exports="data:image/png;base64,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"},2300:function(t,e,a){"use strict";var i=a("bf9c"),o=a.n(i);o.a},"2aa3":function(t,e,a){"use strict";var i=a("833f"),o=a.n(i);o.a},3:function(t,e,a){t.exports=a("63f1")},"446d":function(t,e,a){},"63f1":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("a026"),o=(a("42a1"),a("b3f5"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("app-header"),a("keep-alive",[a("router-view",{staticClass:"main-width"})],1),a("app-footer",{staticClass:"app_index__footer"})],1)}),n=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app_index__header"},[i("div",{staticClass:"main-width"},[i("h1",{staticClass:"hidden"},[t._v("TARS")]),i("div",{staticClass:"logo-wrap"},[i("a",{class:{active:!1},attrs:{href:"/"}},[i("img",{staticClass:"logo",attrs:{src:a("099c")}})])]),i("let-tabs",{staticClass:"tabs",attrs:{center:!0},on:{click:t.clickTab}},[i("let-tab-pane",{attrs:{tab:t.$t("ssoHeader.tab.tab1"),tabkey:"/",icon:t.serverIcon}}),t.isAdmin?i("let-tab-pane",{attrs:{tab:t.$t("ssoHeader.tab.tab2"),tabkey:"/user",icon:t.opaIcon}}):t._e(),t.isAdmin?i("let-tab-pane",{attrs:{tab:t.$t("ssoHeader.tab.tab3"),tabkey:"/auth",icon:t.packageIcon}}):t._e(),i("let-tab-pane",{attrs:{tab:t.$t("ssoHeader.tab.tab4"),tabkey:"/token",icon:t.tokenIcon}})],1),i("div",{staticClass:"language-wrap"},[i("let-select",{attrs:{clearable:!1},on:{change:t.changeLocale},model:{value:t.locale,callback:function(e){t.locale=e},expression:"locale"}},[t._l(t.localeMessages,(function(e){return[i("let-option",{key:e.localeCode,attrs:{value:e.localeCode}},[t._v(t._s(e.localeName))])]}))],2)],1),i("div",{staticClass:"user-wrap"},[i("p",{staticClass:"user-info",on:{click:function(e){t.userOptOpen=!t.userOptOpen}}},[i("span",{staticClass:"name toe"},[t._v(t._s(t.uid)+" ")]),i("i",{directives:[{name:"show",rawName:"v-show",value:t.enableLogin,expression:"enableLogin"}],staticClass:"let-icon let-icon-caret-down",class:{up:t.userOptOpen}}),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.enableLogin&&t.userOptOpen,expression:"enableLogin && userOptOpen"}],staticClass:"user-pop-wrap"},[i("div",[i("a",{attrs:{href:"/pass.html"}},[t._v(t._s(t.$t("ssoHeader.modifyPass")))])]),i("div",[i("a",{attrs:{href:"/logout"}},[t._v(t._s(t.$t("login.logout")))])])])])],1)])],1)])},l=[],r=(a("99af"),a("ac1f"),a("5319"),a("1817")),c=a.n(r),u=a("1ca6"),h=a.n(u),d=a("3e1a"),p=a.n(d),g=a("4824"),f=a.n(g),m=a("f51c"),v={name:"App",data:function(){return{serverIcon:c.a,opaIcon:h.a,packageIcon:f.a,tokenIcon:p.a,locale:this.$cookie.get("locale")||"cn",localeMessages:m["c"],enableLogin:!0,isAdmin:!1,uid:"--",userOptOpen:!1}},methods:{clickTab:function(t){this.$router.replace(t)},changeLocale:function(){this.$cookie.set("locale",this.locale,{expires:"1Y"}),location.reload()},getLoginUid:function(){var t=this;this.$ajax.getJSON("/sso/api/getLoginUid").then((function(e){e&&e.uid?t.uid=e.uid:t.uid="***"})).catch((function(e){t.$tip.error("".concat(t.$t("login.getUidFailed"),": ").concat(e.err_msg||e.message))}))},checkEnableLogin:function(){var t=this;this.$ajax.getJSON("/sso/api/isEnableLogin").then((function(e){t.enableLogin=e.enableLogin||!1})).catch((function(t){}))},checkAdmin:function(){var t=this;this.isAdmin=!1,this.$ajax.getJSON("/sso/api/isAdmin").then((function(e){t.isAdmin=e.admin})).catch((function(t){}))}},mounted:function(){this.getLoginUid(),this.checkEnableLogin(),this.checkAdmin()}},k=v,b=(a("2300"),a("2877")),$=Object(b["a"])(k,s,l,!1,null,null,null),w=$.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app_index__footer"},[t._v(" Copyright Â© "+t._s(t.thisYear)+" BOSS. All Rights Reserved. ")])},A=[],x={data:function(){return{thisYear:(new Date).getFullYear()}}},L=x,_=(a("0494"),Object(b["a"])(L,C,A,!1,null,null,null)),y=_.exports,T={name:"App",components:{AppHeader:w,AppFooter:y}},O=T,P=(a("7037"),Object(b["a"])(O,o,n,!1,null,null,null)),S=P.exports,D=a("8c4f"),E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"20px auto"}},[a("div",{staticStyle:{float:"center"}},[a("let-button",{attrs:{size:"small",theme:"primary"},on:{click:t.addItem}},[t._v(t._s(t.$t("auth.addPrivilege")))]),t._v(" "),a("let-button",{attrs:{size:"small",theme:"danger"},on:{click:t.delItem}},[t._v(t._s(t.$t("auth.delPrivilege")))])],1),a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(e){return e.preventDefault(),t.search(e)}}},[a("let-form-item",{attrs:{label:t.$t("auth.role")}},[a("let-select",{model:{value:t.query.role,callback:function(e){t.$set(t.query,"role",e)},expression:"query.role"}},[a("let-option",{attrs:{value:""}},[t._v(t._s(t.$t("auth.role")))]),a("let-option",{attrs:{value:"admin"}},[t._v("admin")]),a("let-option",{attrs:{value:"operator"}},[t._v("operator")]),a("let-option",{attrs:{value:"developer"}},[t._v("developer")])],1)],1),a("let-form-item",{attrs:{label:t.$t("auth.uid")}},[a("let-select",{attrs:{filterable:""},model:{value:t.query.uid,callback:function(e){t.$set(t.query,"uid",e)},expression:"query.uid"}},t._l(t.userIds,(function(e,i){return a("let-option",{key:i,attrs:{value:e.uid}},[t._v(t._s(e.name||e.uid))])})),1)],1),a("let-form-item",{attrs:{label:t.$t("auth.flag")}},[a("let-input",{attrs:{size:"middle"},model:{value:t.query.flag,callback:function(e){t.$set(t.query,"flag",e)},expression:"query.flag"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[t._v(t._s(t.$t("ssoCommon.search")))])],1)],1),a("let-table",{attrs:{data:t.authListShow,stripe:"","empty-msg":t.$t("ssoCommon.nodata"),title:t.$t("auth.privilegeManageTitle")}},[a("let-table-column",{attrs:{width:"2%"},scopedSlots:t._u([{key:"head",fn:function(e){return[a("let-checkbox",{model:{value:t.isCheckedAll,callback:function(e){t.isCheckedAll=e},expression:"isCheckedAll"}})]}},{key:"default",fn:function(e){return[a("let-checkbox",{attrs:{value:e.row.id},model:{value:e.row.isChecked,callback:function(a){t.$set(e.row,"isChecked",a)},expression:"scope.row.isChecked"}})]}}])}),a("let-table-column",{attrs:{title:t.$t("auth.role"),prop:"role",width:"20%"}}),a("let-table-column",{attrs:{title:t.$t("auth.uid"),prop:"uid",width:"20%"}}),a("let-table-column",{attrs:{title:t.$t("auth.flag"),prop:"flag",width:"15%"}}),t.pageCount>0?a("let-pagination",{attrs:{slot:"pagination",align:"right","prev-text":t.$t("ssoCommon.prevPage"),"next-text":t.$t("ssoCommon.nextPage"),total:t.pageCount,page:t.page},on:{change:t.changePage},slot:"pagination"}):t._e()],1),a("let-modal",{attrs:{title:t.dialogTitle,width:"600px"},on:{"on-cancel":t.onClose,"on-confirm":t.onConfirm},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[a("div",[a("let-form",{ref:"editForm",attrs:{itemWidth:"100%",labelWidth:"100%"}},[a("let-input",{attrs:{type:"hidden"},model:{value:t.dialog.id,callback:function(e){t.$set(t.dialog,"id",e)},expression:"dialog.id"}}),a("let-form-item",{attrs:{label:t.$t("auth.role"),required:""}},[a("let-select",{model:{value:t.dialog.role,callback:function(e){t.$set(t.dialog,"role",e)},expression:"dialog.role"}},[a("let-option",{attrs:{value:"admin"}},[t._v("admin")]),a("let-option",{attrs:{value:"operator"}},[t._v("operator")]),a("let-option",{attrs:{value:"developer"}},[t._v("developer")])],1)],1),a("let-form-item",{attrs:{label:t.$t("auth.uid"),required:""}},[a("let-select",{attrs:{filterable:""},model:{value:t.dialog.uid,callback:function(e){t.$set(t.dialog,"uid",e)},expression:"dialog.uid"}},t._l(t.userIds,(function(e,i){return a("let-option",{key:i,attrs:{value:e.uid}},[t._v(t._s(e.name||e.uid))])})),1)],1),a("let-form-item",{attrs:{label:t.$t("auth.flag"),required:""}},[a("let-input",{attrs:{size:"middle",required:"","required-tip":t.$t("auth.flagTips")},model:{value:t.dialog.flag,callback:function(e){t.$set(t.dialog,"flag",e)},expression:"dialog.flag"}})],1)],1)],1)])],1)},j=[],J=(a("4160"),a("fb6a"),a("841c"),a("1276"),a("159b"),{name:"authPage",data:function(){return{query:{flag:"",role:"",uid:""},isCheckedAll:!1,authList:[],spinning:!1,sortField:1,sortRule:0,totalCount:0,page:1,eachPageCount:20,userIds:[],dialogTitle:"",showDialog:!1,dialog:{id:"",flag:"",role:"",uid:""}}},computed:{pageCount:function(){return Math.ceil(this.totalCount/this.eachPageCount)},authListShow:function(){var t=this.authList.slice((this.page-1)*this.eachPageCount,this.page*this.eachPageCount);return this.isCheckedAll=!1,t.forEach((function(t){t.isChecked=!1})),t}},activated:function(){this.getIdList()},methods:{search:function(){this.getAuthList(this.query.flag,this.query.role,this.query.uid)},getAuthList:function(t,e,a){var i=this,o=this.$Loading.show();this.$ajax.getJSON("/sso/api/auth/page/getAuthList",{flag:t||"",role:e||"",uid:a||""}).then((function(t){o.hide(),t.forEach((function(t){t.isChecked=!1})),i.authList=t,i.totalCount=t.length})).catch((function(t){o.hide(),i.$tip.error("".concat(i.$t("auth.loadListError"),": ").concat(t.err_msg||t.message))}))},getIdList:function(){var t=this;this.userIds=[],this.$ajax.getJSON("/sso/api/auth/page/getUserIdList").then((function(e){t.userIds=e})).catch((function(e){t.$tip.error("".concat(t.$t("auth.loadUserIdError"),": ").concat(e.err_msg||e.message))}))},changePage:function(t){this.page=t},addItem:function(){this.dialogTitle=this.$t("auth.addPrivilege"),this.showDialog=!0,this.dialog.id="",this.dialog.flag="",this.dialog.role="",this.dialog.uid=""},onConfirm:function(){var t=this;if(this.$refs.editForm.validate()){var e=this.dialog.uid?this.dialog.uid.split(/;|,/g):[],a=[];e.forEach((function(e){e&&a.push({flag:t.dialog.flag,role:t.dialog.role,uid:e})}));var i=this.$Loading.show(),o="/sso/api/auth/page/addAuth";this.$ajax.postJSON(o,{auth:a}).then((function(e){i.hide(),t.showDialog=!1,t.$tip.success(t.dialogTitle+t.$t("ssoCommon.success")),t.search()})).catch((function(e){i.hide(),t.$tip.error("".concat(t.dialogTitle).concat(t.$t("ssoCommon.failed"),": ").concat(e.err_msg||e.message))}))}},onClose:function(){},delItem:function(){var t=this;this.$confirm(this.$t("auth.confirmDelete"),this.$t("ssoCommon.confirmTitle")).then((function(){var e=[];if(t.authListShow.forEach((function(t){!0===t.isChecked&&e.push(t.id)})),e.length){var a=t.$Loading.show();t.$ajax.postJSON("/sso/api/auth/page/pageDeleteAuth",{id:e}).then((function(e){a.hide(),t.$tip.success(t.$t("auth.delSucc")),t.search()})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("auth.delError"),": ").concat(e.err_msg||e.message))}))}else t.$tips.error(t.$t("auth.selectRecord"))}))}},mounted:function(){this.getAuthList()},watch:{isCheckedAll:function(){var t=this.isCheckedAll;this.authListShow.forEach((function(e){e.isChecked=t}))}}}),N=J,Y=(a("2aa3"),Object(b["a"])(N,E,j,!1,null,null,null)),I=Y.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"20px auto"}},[a("div",{staticStyle:{float:"center"}},[t.enableLdap?a("let-button",{attrs:{size:"small",theme:"primary"},on:{click:t.addUser}},[t._v(t._s(t.$t("auth.addUser")))]):t._e(),t._v(" "),t.enableLdap?a("let-button",{attrs:{size:"small",theme:"danger"},on:{click:t.delUser}},[t._v(t._s(t.$t("auth.delUser")))]):t._e()],1),a("let-table",{attrs:{data:t.userListShow,stripe:"","empty-msg":t.$t("ssoCommon.nodata"),title:t.$t("auth.userManageTitle")}},[a("let-table-column",{attrs:{width:"5%"},scopedSlots:t._u([{key:"head",fn:function(e){return[a("let-checkbox",{model:{value:t.isCheckedAll,callback:function(e){t.isCheckedAll=e},expression:"isCheckedAll"}})]}},{key:"default",fn:function(e){return[a("let-checkbox",{attrs:{value:e.row.id},model:{value:e.row.isChecked,callback:function(a){t.$set(e.row,"isChecked",a)},expression:"scope.row.isChecked"}})]}}])}),a("let-table-column",{attrs:{title:t.$t("auth.uid"),prop:"uid",width:"20%"}}),a("let-table-column",{attrs:{title:t.$t("auth.userTime"),prop:"update_time",width:"30%"}}),t.pageCount>0?a("let-pagination",{attrs:{slot:"pagination",align:"right","prev-text":t.$t("ssoCommon.prevPage"),"next-text":t.$t("ssoCommon.nextPage"),total:t.pageCount,page:t.page},on:{change:t.changePage},slot:"pagination"}):t._e()],1),a("let-modal",{attrs:{title:t.dialogTitle,width:"600px"},on:{"on-cancel":t.onClose,"on-confirm":t.onConfirm},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[a("div",[a("let-form",{ref:"editForm",attrs:{itemWidth:"100%"}},[a("let-input",{attrs:{type:"hidden"},model:{value:t.dialog.id,callback:function(e){t.$set(t.dialog,"id",e)},expression:"dialog.id"}}),a("let-form-item",{attrs:{label:t.$t("auth.uid")}},[a("let-input",{attrs:{size:"small",required:"","required-tip":t.$t("auth.uidTips")},model:{value:t.dialog.uid,callback:function(e){t.$set(t.dialog,"uid",e)},expression:"dialog.uid"}})],1),a("let-form-item",{attrs:{label:t.$t("pass.password"),required:""}},[a("let-input",{attrs:{type:"password",size:"small",required:"","required-tip":t.$t("pass.passwordTips")},model:{value:t.dialog.password,callback:function(e){t.$set(t.dialog,"password",e)},expression:"dialog.password"}})],1)],1)],1)])],1)},V=[],q=a("c1df"),z=a.n(q),F={name:"userPage",data:function(){return{isCheckedAll:!1,userList:[],totalCount:0,page:1,eachPageCount:20,password:"",dialogTitle:"",showDialog:!1,dialog:{id:"",uid:"",password:""},enableLdap:!1}},computed:{pageCount:function(){return Math.ceil(this.totalCount/this.eachPageCount)},userListShow:function(){var t=this.userList.slice((this.page-1)*this.eachPageCount,this.page*this.eachPageCount);return this.isCheckedAll=!1,t.forEach((function(t){t.isChecked=!1,t.update_time=z()(t.update_time).format("YYYY-MM-DD HH:mm:ss")})),t}},methods:{getEnableLdap:function(){var t=this;this.$ajax.getJSON("/sso/api/isEnableLdap").then((function(e){console.log("enableLdap:",e),e&&(t.enableLdap=!e.enableLdap)})).catch((function(t){console.log("get enableLdap:",t)}))},getUserList:function(){var t=this,e=this.$Loading.show();this.$ajax.getJSON("/sso/api/auth/page/getUserIdList").then((function(a){e.hide(),a.forEach((function(t){t.isChecked=!1})),t.userList=a,t.totalCount=a.length})).catch((function(a){e.hide(),t.$tip.error("".concat(t.$t("auth.loadUserIdError"),": ").concat(a.err_msg||a.message))}))},changePage:function(t){this.page=t},addUser:function(){this.dialogTitle=this.$t("auth.addUser"),this.showDialog=!0,this.dialog.id="",this.dialog.uid="",this.dialog.password=""},onConfirm:function(){var t=this;if(this.$refs.editForm.validate()){var e=this.dialog.uid?this.dialog.uid.split(/;|,/g):[],a=[];e.forEach((function(e){e&&a.push({uid:e,password:t.dialog.password})}));var i=this.$Loading.show(),o="/sso/api/auth/page/addUser";this.$ajax.postJSON(o,{user:a}).then((function(e){i.hide(),t.showDialog=!1,t.$tip.success(t.dialogTitle+t.$t("ssoCommon.success")),t.getUserList()})).catch((function(e){i.hide(),t.$tip.error("".concat(t.dialogTitle).concat(t.$t("ssoCommon.failed"),": ").concat(e.err_msg||e.message))}))}},onClose:function(){},delUser:function(){var t=this;this.$confirm(this.$t("auth.confirmDelete"),this.$t("ssoCommon.confirmTitle")).then((function(){var e=[];if(t.userListShow.forEach((function(a){if(!0===a.isChecked){if("admin"==a.uid)return void t.$tip.error(t.$t("auth.adminDelError"));e.push(a.id)}})),e.length){var a=t.$Loading.show();t.$ajax.postJSON("/sso/api/auth/page/pageDeleteUser",{id:e}).then((function(e){a.hide(),t.$tip.success(t.$t("auth.delSucc")),t.getUserList()})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("auth.delError"),": ").concat(e.err_msg||e.message))}))}else t.$tips.error(t.$t("auth.selectRecord"))}))}},mounted:function(){this.getEnableLdap(),this.getUserList()},watch:{isCheckedAll:function(){var t=this.isCheckedAll;this.userListShow.forEach((function(e){e.isChecked=t}))}}},U=F,B=(a("6a62"),Object(b["a"])(U,M,V,!1,null,null,null)),Z=B.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"20px auto"}},[a("let-table",{attrs:{data:t.authListShow,stripe:"","empty-msg":t.empty_msg}},[a("let-table-column",{attrs:{title:t.$t("auth.role"),prop:"role",width:"20%"}}),a("let-table-column",{attrs:{title:t.$t("auth.uid"),prop:"uid",width:"20%"}}),a("let-table-column",{attrs:{title:t.$t("auth.flag"),prop:"flag",width:"15%"}}),t.pageCount>0?a("let-pagination",{attrs:{slot:"pagination",align:"right","prev-text":t.$t("ssoCommon.prevPage"),"next-text":t.$t("ssoCommon.nextPage"),total:t.pageCount,page:t.page},on:{change:t.changePage},slot:"pagination"}):t._e()],1)],1)},X=[],G={name:"infoPage",data:function(){return{authList:[],isAdmin:!1,totalCount:0,page:1,eachPageCount:20,empty_msg:""}},computed:{pageCount:function(){return Math.ceil(this.totalCount/this.eachPageCount)},authListShow:function(){return this.authList.slice((this.page-1)*this.eachPageCount,this.page*this.eachPageCount)}},methods:{getAuthList:function(){var t=this,e=this.$Loading.show();this.$ajax.getJSON("/sso/api/getMyAuthList").then((function(a){e.hide(),t.authList=a,t.totalCount=a.length})).catch((function(a){e.hide(),t.$tip.error("".concat(t.$t("auth.loadListError"),": ").concat(a.err_msg||a.message))}))},changePage:function(t){this.page=t},checkAdmin:function(){var t=this;this.isAdmin=!1,this.$ajax.getJSON("/sso/api/isAdmin").then((function(e){t.isAdmin=e.admin,t.isAdmin?t.empty_msg=t.$t("ssoCommon.admin"):t.empty_msg=t.$t("ssoCommon.nodata")})).catch((function(t){}))}},mounted:function(){this.checkAdmin(),this.getAuthList()}},Q=G,R=(a("b92e"),Object(b["a"])(Q,H,X,!1,null,null,null)),K=R.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"20px auto"}},[a("div",{staticStyle:{float:"center"}},[a("let-button",{attrs:{size:"small",theme:"primary"},on:{click:t.addToken}},[t._v(t._s(t.$t("auth.addToken")))]),t._v(" "),a("let-button",{attrs:{size:"small",theme:"danger"},on:{click:t.delToken}},[t._v(t._s(t.$t("auth.delToken")))])],1),a("let-table",{attrs:{data:t.tokenListShow,stripe:"","empty-msg":t.$t("ssoCommon.nodata"),title:t.$t("auth.tokenManageTitle")}},[a("let-table-column",{attrs:{width:"5%"},scopedSlots:t._u([{key:"head",fn:function(e){return[a("let-checkbox",{model:{value:t.isCheckedAll,callback:function(e){t.isCheckedAll=e},expression:"isCheckedAll"}})]}},{key:"default",fn:function(e){return[a("let-checkbox",{attrs:{value:e.row.id},model:{value:e.row.isChecked,callback:function(a){t.$set(e.row,"isChecked",a)},expression:"scope.row.isChecked"}})]}}])}),a("let-table-column",{attrs:{title:t.$t("auth.uid"),prop:"uid",width:"10%"}}),a("let-table-column",{attrs:{title:t.$t("auth.token"),prop:"token",width:"20%"}}),a("let-table-column",{attrs:{title:t.$t("auth.tokenExpireTime"),prop:"expire_time",width:"15%"}}),a("let-table-column",{attrs:{title:t.$t("auth.tokenTime"),prop:"update_time",width:"15%"}}),a("let-table-column",{attrs:{title:t.$t("auth.status"),prop:"validDesc",width:"5%"}}),a("let-table-column",{attrs:{title:t.$t("auth.operator"),width:"5%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("let-table-operation",{on:{click:function(a){return t.onTokenValid(e.row)}}},[a("let-tooltip",{staticStyle:{width:"150px"},attrs:{content:t.isTokenValid(e.row.valid)}},[t._v(t._s(t.isTokenValid(e.row.valid)))])],1)]}}])}),t.pageCount>0?a("let-pagination",{attrs:{slot:"pagination",align:"right","prev-text":t.$t("ssoCommon.prevPage"),"next-text":t.$t("ssoCommon.nextPage"),total:t.pageCount,page:t.page},on:{change:t.changePage},slot:"pagination"}):t._e()],1),a("let-modal",{attrs:{title:t.dialogTitle,width:"600px"},on:{"on-cancel":t.onClose,"on-confirm":t.onConfirm},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[a("div",[a("let-form",{ref:"editForm",attrs:{itemWidth:"100%"}},[a("let-form-item",{attrs:{label:t.$t("auth.tokenExpireTime")}},[a("let-datetime-picker",{attrs:{required:"","required-tip":t.$t("auth.tokenTips")},model:{value:t.dialog.expire_time,callback:function(e){t.$set(t.dialog,"expire_time",e)},expression:"dialog.expire_time"}})],1)],1)],1)])],1)},tt=[],et={name:"tokenPage",data:function(){return{isCheckedAll:!1,tokenList:[],totalCount:0,page:1,eachPageCount:30,token:"",expireTime:"",dialogTitle:"",showDialog:!1,dialog:{expire_time:""}}},computed:{pageCount:function(){return Math.ceil(this.totalCount/this.eachPageCount)},tokenListShow:function(){var t=this,e=this.tokenList.slice((this.page-1)*this.eachPageCount,this.page*this.eachPageCount);return this.isCheckedAll=!1,e.forEach((function(e){e.isChecked=!1,e.validDesc=1==e.valid?t.$t("auth.valid"):t.$t("auth.notValid"),e.expire_time=z()(e.expire_time).format("YYYY-MM-DD HH:mm:ss"),e.update_time=z()(e.update_time).format("YYYY-MM-DD HH:mm:ss")})),e}},methods:{getTokenList:function(){var t=this,e=this.$Loading.show();this.$ajax.getJSON("/sso/api/auth/getTokenList").then((function(a){e.hide(),a.forEach((function(t){t.isChecked=!1})),t.tokenList=a,t.totalCount=a.length})).catch((function(a){e.hide(),t.$tip.error("".concat(t.$t("auth.loadTokenError"),": ").concat(a.err_msg||a.message))}))},onTokenValid:function(t){var e=this;this.$confirm(this.$t("auth.setTokenValid")).then((function(){var a=e.$Loading.show();e.$ajax.postJSON("/sso/api/auth/setTokenValid",{id:t.id,valid:1-t.valid}).then((function(t){a.hide(),e.getTokenList(),e.$tip.success("".concat(e.$t("auth.setTokenSucc")))})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("auth.setTokenError"),": ").concat(t.err_msg||t.message))}))}))},isTokenValid:function(t){return 1==t?this.$t("auth.notValid"):this.$t("auth.valid")},changePage:function(t){this.page=t},addToken:function(){this.dialogTitle=this.$t("auth.addToken"),this.showDialog=!0,this.dialog.expire_time=""},onConfirm:function(){var t=this;if(this.$refs.editForm.validate()){var e=this.$Loading.show(),a="/sso/api/auth/addToken";this.$ajax.postJSON(a,{expire_time:this.dialog.expire_time}).then((function(a){e.hide(),t.showDialog=!1,t.$tip.success(t.dialogTitle+t.$t("ssoCommon.success")),t.getTokenList()})).catch((function(a){e.hide(),t.$tip.error("".concat(t.dialogTitle).concat(t.$t("ssoCommon.failed"),": ").concat(a.err_msg||a.message))}))}},onClose:function(){},delToken:function(){var t=this;this.$confirm(this.$t("auth.confirmTokenDelete"),this.$t("auth.confirmTokenTitle")).then((function(){var e=[];if(t.tokenListShow.forEach((function(t){!0===t.isChecked&&e.push(t.id)})),e.length){var a=t.$Loading.show();t.$ajax.postJSON("/sso/api/auth/deleteToken",{id:e}).then((function(e){a.hide(),t.$tip.success(t.$t("auth.delSucc")),t.getTokenList()})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("auth.delError"),": ").concat(e.err_msg||e.message))}))}else t.$tips.error(t.$t("auth.selectRecord"))}))}},mounted:function(){this.getTokenList()},watch:{isCheckedAll:function(){var t=this.isCheckedAll;this.tokenListShow.forEach((function(e){e.isChecked=t}))}}},at=et,it=(a("d47f"),Object(b["a"])(at,W,tt,!1,null,null,null)),ot=it.exports;i["default"].use(D["a"]);var nt=new D["a"]({routes:[{path:"/auth",name:"AuthManage",component:I},{path:"/user",name:"userManage",component:Z},{path:"/token",name:"tokenManage",component:ot},{path:"/",name:"infoManage",component:K}]});i["default"].config.productionTip=!1,m["b"].call(void 0).then((function(){new i["default"]({el:"#auth-app",router:nt,i18n:m["a"],components:{App:S},template:"<App/>"})}))},"6a62":function(t,e,a){"use strict";var i=a("446d"),o=a.n(i);o.a},7037:function(t,e,a){"use strict";var i=a("9df6"),o=a.n(i);o.a},"77bd":function(t,e,a){},"833f":function(t,e,a){},"9df6":function(t,e,a){},b92e:function(t,e,a){"use strict";var i=a("ee0e"),o=a.n(i);o.a},bf9c:function(t,e,a){},d47f:function(t,e,a){"use strict";var i=a("77bd"),o=a.n(i);o.a},ee0e:function(t,e,a){}});