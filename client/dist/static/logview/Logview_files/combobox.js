cloudjs.define({combobox:function(options){var defaults={isMulti:!1,width:null,height:200,placeholder:"",separator:";",defaultValue:"",checkValue:!1,showIcon:!0,showAll:!0,recordLen:10,name:"",data:null,comValue:"value",comText:"text",checkAllText:"全选",unCheckAllText:"取消选择",showCheckAllText:!0,showCheckbox:!0,params:"",onCreate:$.noop,onAjax:$.noop,onOpen:$.noop,onClose:$.noop,onSelect:$.noop,onCheckAll:$.noop,onUnCheckAll:$.noop},_args0=options,_args1=arguments[1],_self=this;if(0!==_self.length){if(!options||$.isPlainObject(options))options&&"undefined"!==typeof options.defaultValue&&(defaults.hasDefaultValue=!0),$.extend(defaults,options);else if("string"===typeof _args0)return void("getValue"===_args0?cloudjs.callback(_self[0]._cloudjsComboObj[_args0]()):_self[0]._cloudjsComboObj&&_self[0]._cloudjsComboObj[_args0](_args1));return _self.each((function(){var e=this;e._cloudjsComboObj=e._cloudjsComboObj?$.extend(e._cloudjsComboObj,_getComboObj()):_getComboObj(),_init.call(e)})),this}function _init(){var e,t,o=$(this),a=this._cloudjsComboObj,l=a.cfg;if(a.self=o,o.hasClass("combo_text")||o.parent().hasClass("combo_container")?o.siblings().remove():o.prop("disabled")?o.wrap('<span class="combo_container combo_disabled"></span>'):o.wrap('<span class="combo_container"></span>'),o.is("select")){if(l.hasDefaultValue=!0,l.isSelectTag=!0,l.checkValue=!options||"undefined"===typeof options.checkValue||options.checkValue,o.hide(),o.parent().append('<input type="text" class="combo_text" />'),a.showEle=o.siblings(".combo_text"),a.showEle.css({width:o.outerWidth()-28}),l.isMulti?o.prop("multiple",!0):l.isMulti=o.prop("multiple"),!l.data){l.isMulti?l.defaultValue=l.defaultValue||(o.val()?o.val().join(l.separator):""):l.defaultValue=l.defaultValue&&0!==o.find('option[value="'+l.defaultValue+'"]').not(".not_data").length?l.defaultValue:o.val(),l.data=[],e=o.find("option").not(".not_data");for(var s=0;s<e.length;s++)e.eq(s).attr("value")?(t={},t[l.comValue]=e.eq(s).attr("value"),t[l.comText]=e.eq(s).text(),t.disabled=e.eq(s).prop("disabled")?"true":"false",l.data.push(t)):l.placeholder=l.placeholder||e.eq(s).text()}}else!o.hasClass("combo_text")&&o.addClass("combo_text"),a.showEle=o;a.showEle.attr("placeholder",l.placeholder),a.comboEle=a.showEle.parent().css({zIndex:cloudjs.zIndex()}),l.showIcon?o.parent().append('<input type="hidden" class="combo_value" name="'+l.name+'" /><span class="combo_arrow cloudjs_icon"><span></span></span>'):o.parent().append('<input type="hidden" class="combo_value" name="'+l.name+'" />'),a.hideEle=o.siblings(".combo_value"),_setDefaultValue.call(this),_bindEvent.call(this),a.create()}function _setDefaultValue(e){$(this);var t,o=this._cloudjsComboObj,a=o.cfg,l="",s="";if(e&&(a.data=e),a.hasDefaultValue){if(a.data&&"object"===typeof a.data){if(a.isMulti)a.defaultText=_getMultiValue.call(this,a.data,a.defaultValue);else if($.isArray(a.data)){for(var i=0;i<a.data.length;i++)a.defaultValue===a.data[i][a.comValue]&&(s=a.data[i][a.comText],l=a.data[i][a.comValue]);a.defaultText=s,a.defaultValue=l}else"string"===typeof a.data&&(a.url=a.data);return a.defaultValue=a.checkValue&&""===a.defaultText?"":a.defaultValue,o.showEle.val(a.defaultText),o.hideEle.val(a.defaultValue),void(a.isRefresh&&a.defaultValue!==a.selectValue&&a.defaultValue!==a.selectValue+a.separator&&o.select(a.defaultValue,a.defaultText))}a.url&&(t=_getParams.call(this),o.comboEle.addClass("combo_disabled"),_getAjaxData.call(this,_setDefaultValue,!1,t))}else o.hideEle.val("")}function _getMultiValue(e,t){$(this);var o,a=this._cloudjsComboObj,l=a.cfg,s="";if(l.defaultValue="",t.lastIndexOf(l.separator)===t.length-1&&(t=t.substring(0,t.length-1)),o=t.split(l.separator),$.isArray(e))for(var i=0;i<e.length;i++)for(var c=0;c<o.length;c++)-1===(l.separator+l.defaultValue).indexOf(l.separator+o[c]+l.separator)&&o[c]===e[i][l.comValue]&&(l.defaultValue+=e[i][l.comValue]+l.separator,s+=e[i][l.comText]+l.separator);return s}function _getAjaxData(e,t,o){var a,l,s=this,i=this._cloudjsComboObj,c=i.cfg;o=o||"",a=""!==o,c.ajaxIng=!0,$.ajax({url:c.url,type:"post",dataType:"json",data:o,async:t,success:function(t){c.ajaxIng=!1,i.comboEle.removeClass("combo_disabled"),l=c.onAjax(t)||t,!a&&t&&$.isArray(t)&&0!==t.length&&(c.data=l),e.call(s,l,a)}})}function _changeSelect(e,t,o){var a,l,s=$(this),i=this._cloudjsComboObj,c=i.cfg,n=$.trim(i.hideEle.val()),r=$.trim(i.showEle.val()),d=r.split(c.separator);if(o="undefined"===typeof o||o,e="undefined"!==typeof e?$(e):i.panelEle.find(".combo_item_hover"),t=t||"","input"!==t){if(e.hasClass("combo_item_disabled"))return;e.find(".combo_check").prop("checked")?e.find(".combo_check").prop("checked",!1):e.find(".combo_check").prop("checked",!0)}else e=e.parent();if(a=e.attr("combo-value"),l=e.text(),c.isMulti){for(var h=0;h<d.length;h++)-1===(","+c.strData).indexOf(","+encodeURIComponent(d[h])+"^")&&d.splice(h,1);if(r=d.join(";"),""!==r&&(r+=c.separator),e.find(".combo_check").prop("checked")){if(e.addClass("combo_item_selected"),c.params)return c.selectValue+=a+c.separator,c.selectText+=l+c.separator,void _checkInput.call(s[0],c.selectText,!1);-1===(c.separator+n).indexOf(c.separator+a+c.separator)?(a=n+a+c.separator,l=r+l+c.separator):(a=n,l=r)}else{if(e.removeClass("combo_item_selected"),c.params)return c.selectValue=(c.separator+c.selectValue).replace(c.separator+a+c.separator,""),c.selectText=(c.separator+c.selectText).replace(c.separator+l+c.separator,""),void _checkInput.call(s[0],i.showEle.val(),!1);a=(c.separator+n).replace(c.separator+a+c.separator,c.separator).replace(c.separator,""),l=(c.separator+r).replace(c.separator+l+c.separator,c.separator).replace(c.separator,"")}}else e.addClass("combo_item_selected").siblings().removeClass("combo_item_selected"),i.panelEle.hide(),i.close();i.showEle.val(l),i.hideEle.val(a),o&&n!==a&&i.select(a,l)}function _formatDataToHtml(e,t){$(this);var o,a,l,s=this._cloudjsComboObj,i=s.cfg,c="",n=!1,r=!1,d="";if(i.lastData=e,i.selectValue=i.isFirst&&"undefined"===typeof i.selectValue?i.defaultValue:i.selectValue,i.selectText=i.isFirst&&"undefined"===typeof i.selectText?i.defaultText:i.selectText,i.isMulti&&!t&&i.showCheckAllText&&(c+='<div class="combo_head"><span class="combo_close_btn cloudjs_icon"></span><span class="cloudjs_btn_white combo_check_all '+(i.isCheckAll?"combo_uncheck_all":"")+'">'+(i.isCheckAll?i.unCheckAllText:i.checkAllText)+"</span></div>"),$.isArray(e))for(var h=0;h<e.length;h++)o=e[h][i.comValue],a=e[h][i.comText],l=!(!e[h].disabled||"false"===e[h].disabled),n=!1,i.isFirst&&(i.strData+=encodeURIComponent(a)+"^"+encodeURIComponent(l)+"#"+encodeURIComponent(o)+","),e[h].disabled&&"true"===e[h].disabled&&(n=!0),!i.showAll&&h>=i.recordLen||(i.isMulti?(r=i.selectValue===o&&""!==s.showEle.val()||-1!==(i.separator+i.selectValue).indexOf(i.separator+o+i.separator),d='<input style="'+(i.showCheckbox?"":"display: none;")+'" type="checkbox" '+(n?'disabled="disabled"':"")+' class="combo_check" '+(r?'checked="checked"':"")+" />",c+='<div class="combo_item '+(n?"combo_item_disabled":"")+(r?" combo_item_selected":"")+'" combo-value="'+o+'">'+d+a+"</div>"):(r=i.selectValue===o&&""!==s.showEle.val(),c+='<div class="combo_item '+(n?"combo_item_disabled":"")+(r?" combo_item_selected":"")+'" combo-value="'+o+'">'+a+"</div>"));return c}function _initSearchPanel(e,t){var o,a,l=this,s=this._cloudjsComboObj,i=s.cfg,c=parseInt(s.comboEle.css("border-left-width"),10),n=s.comboEle.outerHeight()-parseInt(s.comboEle.css("border-bottom-width"),10)-parseInt(s.comboEle.css("border-top-width"),10),r=$(window).scrollTop(),d=s.comboEle.offset().top,h=$(window).height();if(s.comboEle.css({zIndex:cloudjs.zIndex()}),e=e||i.data,i.width=i.width||s.comboEle.innerWidth(),!s.comboEle.hasClass("combo_disabled")&&!s.showEle.prop("disabled")){if(i.isFirst&&(s.panelEle&&s.panelEle.remove(),s.panelEle=$("<div></div>").addClass("combo_panel").css({width:i.width,"max-height":i.height,top:n,left:-c}),i.isMulti&&s.panelEle.css({"min-width":"105px"}),s.comboEle.append(s.panelEle)),o=s.panelEle.is(":hidden"),e&&"string"!==typeof e){if(t||i.isFirst){if(a=_formatDataToHtml.call(l,e,t),!a)return void s.panelEle.hide().find(".combo_item_hover").removeClass("combo_item_hover")}else if("undefined"!==typeof JSON){if("[]"===JSON.stringify(e))return;if(JSON.stringify(i.lastData)!==JSON.stringify(e)&&(a=_formatDataToHtml.call(l,e,t),!a))return}else if(a=_formatDataToHtml.call(l,e,t),!a)return;return s.panelEle.html(a),d-r>s.panelEle.outerHeight()&&h+r<n+d+s.panelEle.outerHeight()?s.panelEle.css({bottom:n,top:"auto"}):s.panelEle.css({bottom:"auto",top:n}),s.comboEle.css({zIndex:cloudjs.zIndex()}),s.panelEle.show().unbind("click").bind("click",(function(e){var t=e.target;i.isSelectBlur=!0,$(t).hasClass("combo_item")?_changeSelect.call(l,t,t.tagName.toLowerCase()):"input"===t.tagName.toLowerCase()?i.isMulti?_changeSelect.call(l,t,t.tagName.toLowerCase()):_changeSelect.call(l,$(t).closest(".combo_item"),$(t).closest(".combo_item")[0].tagName.toLowerCase()):0!==$(t).closest(".combo_item").length&&_changeSelect.call(l,$(t).closest(".combo_item"),$(t).closest(".combo_item")[0].tagName.toLowerCase()),e.stopPropagation()})).find(".combo_head").bind("mouseenter",(function(e){s.panelEle.find(".combo_item").removeClass("combo_item_hover")})).find(".combo_check_all").unbind().bind("click",(function(e){$(this).hasClass("combo_uncheck_all")?($(this).removeClass("combo_uncheck_all").html(i.checkAllText),s.unCheckAll(),i.isCheckAll=!1):($(this).addClass("combo_uncheck_all").html(i.unCheckAllText),s.checkAll(),i.isCheckAll=!0),s.panelEle.find(".combo_item").not(".combo_item_disabled").each((function(e){var t=!1;$(this).find(".combo_check").prop("checked",i.isCheckAll),e===s.panelEle.find(".combo_item").not(".combo_item_disabled").length-1&&(t=!0),_changeSelect.call(l,$(this).find(".combo_check"),"input",t)})),e.stopPropagation()})).end().find(".combo_close_btn").unbind().bind("click",(function(e){s.panelEle.hide(),s.close(),e.stopPropagation()})),o&&s.open(),0===s.panelEle.find(".combo_item_selected").length&&s.panelEle.find(".combo_item:eq(0)").addClass("combo_item_hover"),s.panelEle.find(".combo_item").unbind().bind("mouseenter",(function(){$(this).addClass("combo_item_hover")})).bind("mouseleave",(function(){$(this).removeClass("combo_item_hover")})),void(i.isFirst=!1)}i.url&&!i.ajaxIng&&_getAjaxData.call(l,_initSearchPanel,!0)}}function _checkInput(e,t){t="undefined"===typeof t||t;var o,a=this,l=a._cloudjsComboObj,s=l.cfg,i=e.split(s.separator),c=s.selectValue.split(s.separator),n=s.selectText.split(s.separator),r=[],d=[],h=i[i.length-1],u="",p="",f="";if(""===l.showEle.val())l.panelEle.find(".combo_item").removeClass("combo_item_selected").find(".combo_check").prop("checked",!1),p="",f="",h="";else{for(var m=0;m<c.length;m++){o=!1;for(var b=0;b<i.length;b++)if(""!==n[m]&&n[m]===i[b]&&-1===$.inArray(n[m],r)){o=!0,r.push(n[m]),d.push(c[m]);break}o||l.panelEle.find('.combo_item[combo-value="'+c[m]+'"]').removeClass("combo_item_selected").find(".combo_check").prop("checked",!1)}p=d.join(s.separator)?d.join(s.separator)+s.separator:"",0===r.length?(u="",f=u+h):(u=r.join(s.separator),f=u,-1===$.inArray(h,r)&&(f=u+s.separator,t&&(f+=h)),u+=s.separator)}return l.showEle.val(f),l.hideEle.val(p),p!==s.selectValue&&l.select(p,u),h}function _getParams(e){var t=this,o=t._cloudjsComboObj.cfg,a="";if(e=e||"","string"===typeof o.params&&-1!==o.params.indexOf("{%s}"))a=o.params.replace(/{%s}/g,e);else if($.isPlainObject(o.params))for(var l in a={},o.params)a[l]=o.params[l],-1!==o.params[l].indexOf("{%s}")&&(a[l]=a[l].replace(/{%s}/g,e));return a}function _getComboObj(){var e={cfg:{},create:function(){this.cfg.onCreate.apply(this,arguments)},open:function(){this.cfg.onOpen.apply(this,arguments)},close:function(){this.cfg.onClose.apply(this,arguments),this.comboEle.find(".combo_item_hover").removeClass("combo_item_hover")},checkAll:function(){this.cfg.onCheckAll.apply(this,arguments)},unCheckAll:function(){this.cfg.onUnCheckAll.apply(this,arguments)},select:function(e,t){var o,a={};a[this.cfg.comValue]=e,a[this.cfg.comText]=t,this.cfg.onSelect.call(this,a),this.cfg.selectValue=e,this.cfg.selectText=t,this.cfg.isSelectTag&&(this.cfg.isMulti?(o=e.split(this.cfg.separator),this.self.prop("multiple",!0).find("option").not(".not_data").each((function(){this.disabled||$(this).prop("selected",$.inArray(this.value,o)>-1)}))):this.self.prop("multiple",!1).find('option[value="'+e+'"]').not(".not_data").prop("selected",!0),this.self.change())},getValue:function(){var e={};return e[this.cfg.comValue]=$.trim(this.hideEle.val()),e[this.cfg.comText]=$.trim(this.showEle.val()),e},setValue:function(e,t){if(t="undefined"!==typeof t&&t,"number"===typeof e&&(e=e.toString()),"string"===typeof e){var o,a,l=this.cfg,s=l.data,i=[],c="",n=l.separator;if(l.isMulti&&(i=e.split(n)),o=i.length,-1!==e.lastIndexOf(n)&&e.lastIndexOf(n)===e.length-1&&(o-=1),$.isArray(s))for(var r=0;r<s.length;r++)if(l.isMulti)for(var d=0;d<o;d++)s[r][l.comValue]==i[d]&&"true"!==s[r].disabled&&(a=a||"",c+=s[r][l.comText]+n,a+=i[d]+n);else s[r][l.comValue]==e&&"true"!==s[r].disabled&&(a=e,c=s[r][l.comText]);""===e&&(a=e),a||""===a||t?(this.cfg.isFirst=!0,this.showEle.val(c),this.hideEle.val(a),a!==this.cfg.selectValue&&this.select(a,c),""===a&&this.cfg.isSelectTag&&0===this.self.find('option[value=""]').length&&this.self.prepend('<option class="not_data" value="" selected="selected"></option>')):cloudjs.util.error("设置的value值不在下拉列表中。")}else cloudjs.util.error("设置的value值格式不正式。")},addData:function(e){var t=this.cfg,o=t.data,a=[],l=[],s=!1;if($.isArray(o)&&$.isArray(e)){for(var i=0;i<e.length;i++){for(var c=0;c<o.length;c++)if(o[c][t.comValue]===e[i][t.comValue]){s=!0;break}!s&&a.push(e[i])}0!==a.length&&(l=o.concat(a),this.refresh({data:l}))}else cloudjs.util.error("新增数据格式不正确。")},delData:function(e){if("string"===typeof e){var t=this.cfg.data,o=this.cfg.separator,a=e.split(o);if($.isArray(t))for(var l=0;l<t.length;l++)for(var s=0;s<a.length;s++)t[l][this.cfg.comValue]===a[s]&&(t.splice(l,1),l--);this.refresh({data:t})}else cloudjs.util.error("删除的value值格式不正式。")},refresh:function(e){this.cfg.isRefresh=!0,this.cfg.isFirst=!0,this.cfg.strData="";var t={};"undefined"!==typeof this.cfg.selectValue?this.cfg.selectValue:this.cfg.defaultValue;if(e){if(t=e,!$.isPlainObject(t))return void cloudjs.util.error("刷新的数据格式不正式。");this.cfg.data=t.data||this.cfg.data,this.cfg.isMulti="undefined"!==typeof t.isMulti?t.isMulti:this.cfg.isMulti}else this.cfg.isSelectTag&&(this.cfg.data=null,this.cfg.isMulti=t.isMulti=this.self.prop("multiple"));"undefined"!==typeof t.defaultValue?this.cfg.defaultValue=t.defaultValue:this.cfg.defaultValue=this.hideEle.val(),$.extend(this.cfg,t),_init.call(this.self[0])},disable:function(){this.comboEle.addClass("combo_disabled"),this.showEle.prop("disabled",!0)},enable:function(){this.comboEle.removeClass("combo_disabled"),this.showEle.prop("disabled",!1)}};return $.extend(e.cfg,defaults),e.cfg.isFirst=!0,e.cfg.isSelectTag=!1,e.cfg.defaultText="",e.cfg.strData="",e.cfg.ajaxIng=!1,e.cfg.searchTimeout=null,e.cfg.comboObj=null,e.cfg.lastData=null,e.cfg.isContextMenu=!1,e.cfg.isSelectBlur=!1,e.cfg.url="string"===typeof e.cfg.data?e.cfg.data:"",e}function _bindEvent(){var wSefl=this,wComboObj=wSefl._cloudjsComboObj,wCfg=wComboObj.cfg;wComboObj.comboEle.unbind("click").bind("click",(function(e){var t=$(this).children().eq(0)[0],o=t._cloudjsComboObj;o.showEle.focus(),e.stopPropagation()})),wComboObj.showEle.unbind().bind("focus",(function(e){var t=$(this).parent().children().eq(0)[0];_initSearchPanel.call(t)})).bind("click",(function(e){e.stopPropagation()})).bind("keyup",(function(e){var self=$(this).parent().children().eq(0)[0],cObj=self._cloudjsComboObj,cfg=cObj.cfg,text=$.trim($(this).val()),exg,macthData=null,dataArr=[],ajaxParams,searchFun,tempObj;37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode&&46!==e.keyCode&&13!==e.keyCode&&(clearTimeout(cfg.searchTimeout),searchFun=function(){if(text=$.trim(cObj.showEle.val()),text=cfg.isMulti?_checkInput.call(self,text):text,exg="var exg = /[^,]*"+encodeURIComponent(text)+"[^,]*#[^,]*/gi",eval(exg),cfg.params)return ajaxParams=_getParams.call(self,text),void _getAjaxData.call(self,_initSearchPanel,!0,ajaxParams);macthData=-1===decodeURIComponent(cfg.strData).toLowerCase().indexOf(text.toLowerCase())?[]:cfg.strData.match(exg),macthData||(macthData=[]);for(var i=0;i<macthData.length;i++)tempObj={},tempObj[cfg.comValue]=decodeURIComponent(macthData[i].split("#")[1]),tempObj[cfg.comText]=decodeURIComponent(macthData[i].split("#")[0]).split("^")[0],tempObj.disabled=decodeURIComponent(macthData[i].split("#")[0]).split("^")[1],-1!==tempObj[cfg.comText].toLowerCase().indexOf(text.toLowerCase())&&dataArr.push(tempObj);_initSearchPanel.call(self,dataArr,text)},cfg.searchTimeout=setTimeout(searchFun,300))})).bind("keydown",(function(e){var t=$(this).parent().children().eq(0)[0],o=t._cloudjsComboObj,a=o.cfg,l=o.panelEle,s=($.trim($(this).val()),o.panelEle.children().length),i=o.panelEle.find(".combo_item_hover"),c=0===i.length?-1:i.index();if(a.isSelectBlur=!1,13===e.keyCode)return-1===c?(o.showEle.blur(),!1):(_changeSelect.call(t),void(a.isMulti||o.showEle.blur()));if(38===e.keyCode){if(-1===c?c=s-1:--c,l.children().eq(c).hasClass("combo_head")&&--c,l.children().removeClass("combo_item_hover"),-1===c)return;l.children().eq(c).addClass("combo_item_hover"),l.find(".combo_item_hover").position().top>l.scrollTop()?l.scrollTop(l.find(".combo_item_hover").position().top):l.find(".combo_item_hover").position().top<0&&l.scrollTop(l.scrollTop()-l.find(".combo_item_hover").outerHeight())}else if(40===e.keyCode){if(c<s?++c:c=0,l.children().eq(c).hasClass("combo_head")&&++c,l.children().removeClass("combo_item_hover"),c===s)return;l.children().eq(c).addClass("combo_item_hover"),l.find(".combo_item_hover").position().top>=l.outerHeight()-l.find(".combo_item_hover").outerHeight()?l.scrollTop(l.scrollTop()+l.find(".combo_item_hover").outerHeight()):l.find(".combo_item_hover").position().top<0&&l.scrollTop(0)}})).bind("blur",(function(){var e,t,o,a=$(this).parent().children().eq(0)[0],l=a._cloudjsComboObj,s=l.cfg,i=$.trim(l.showEle.val()),c=$.trim(l.hideEle.val()),n=s.selectText,r="",d=$.trim(l.showEle.val()),h=[];if(s.isSelectBlur)s.isSelectBlur=!1;else{if(s.checkValue||s.isMulti)if(i){if(s.isMulti){if(h=c.split(s.separator),t=h.length,-1!==c.lastIndexOf(s.separator)&&c.lastIndexOf(s.separator)===c.length-1&&(t-=1),s.params)return void _checkInput.call(a,i,!1);i="";for(var u=0;u<t;u++)-1!==(","+s.strData).indexOf("#"+encodeURIComponent(h[u])+",")?(o=s.strData.split("#"+encodeURIComponent(h[u])+",")[0].split(",").length,-1!==(s.separator+d+s.separator).indexOf(s.separator+decodeURIComponent(s.strData.split("#"+encodeURIComponent(h[u])+",")[0].split(",")[o-1].split("^")[0])+s.separator)?(i+=decodeURIComponent(s.strData.split("#"+encodeURIComponent(h[u])+",")[0].split(",")[o-1].split("^")[0])+s.separator,r+=h[u]+s.separator):(l.panelEle.find('.combo_item[combo-value="'+h[u]+'"] .combo_check').removeAttr("checked"),l.panelEle.find('.combo_item[combo-value="'+h[u]+'"]').removeClass("combo_item_selected"))):(l.panelEle.find('.combo_item[combo-value="'+h[u]+'"] .combo_check').removeAttr("checked"),l.panelEle.find('.combo_item[combo-value="'+h[u]+'"]').removeClass("combo_item_selected"))}else e=(","+s.strData).indexOf(","+encodeURIComponent(i)+"^"),-1!==e?(r=decodeURIComponent(s.strData.split(encodeURIComponent(i)+"^")[1].split(",")[0].split("#")[1]),i=l.showEle.val()):(r="",i="");l.showEle.val(i)}else l.hideEle.val(""),s.isSelectTag&&0===$(a).find('option[value=""]').length&&$(a).prepend('<option class="not_data" value="" selected="selected"></option>');else{if(d===n)return;r=d,s.isSelectTag&&$(a).prepend('<option class="not_data" selected="selected" value="'+r+'">'+d+"</option>")}r!==c&&(l.hideEle.val(r),l.select(r,i))}})).bind("input",(function(){$(this).keyup()})).bind("contextmenu",(function(){wCfg.isContextMenu=!0})),"onpropertychange"in this._cloudjsComboObj.showEle[0]&&(wComboObj.showEle[0].onpropertychange=function(){var e=$(this).parent().children().eq(0)[0],t=e._cloudjsComboObj,o=t.cfg;o.isContextMenu&&!o.isFirst&&(t.showEle.keyup(),o.isContextMenu=!1)}),$("html").bind("click",(function(){$(".combo_panel:visible").each((function(){var e=$(this).parent().children().eq(0)[0];e._cloudjsComboObj.panelEle.hide(),e._cloudjsComboObj.close()}))}))}cloudjs.util.error("调用combobox下拉组件失败，"+_self.selector+" 找不到相应的元素!")}});